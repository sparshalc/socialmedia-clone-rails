<style>
.what{
  width: auto;
  height: 43px;
}
  .btn .badge {
      position: relative;
      top: -21px;
      left: -14px;
  }
</style>
<header class="p-3 text-bg-dark">
    <div class="container">
      <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
        <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
          <h4><a href="/posts" class="nav-link px-2 text-white">RailsBook</a></h4>
        </ul>
        <% if user_signed_in? %>
        <div class="dropdown">
          <button class="btn btn-dark dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
            <%= current_user.email %>
          </button>
          <ul class="dropdown-menu">
            <li><%= link_to 'Edit', main_app.edit_user_registration_path,class:"dropdown-item"%></li>
            
           <li> <%= button_to 'Logout',main_app.destroy_user_session_path,class:'dropdown-item text-danger',method: :delete%></li>
          </ul>
        </div>  
        <% else %>
        <div class="text-end">
          <%= link_to 'Login',user_session_path,class: "btn btn-warning me-2"%>
          <%= link_to 'SignUp',new_user_registration_path,class: "btn btn-outline-light me-2"%>
        </div>
        <% end %>
        <% if user_signed_in? %>
           <% if (Notification.unread_count(current_user)) == 0 %>
             <%= link_to notifications_path, class: 'btn btn-dark' do%> 
               <i class="fas fa-envelope fa-2x"></i>           
              <% end %>
           <% elsif (Notification.unread_count(current_user)) < 9  %>
            <%= link_to notifications_path, class: 'btn btn-dark' do%> 
                <i class="fas fa-envelope fa-2x"></i>
                <span class="badge rounded-pill badge-notification bg-danger"><%=(Notification.unread_count(current_user))   %></span>
            <% end %>
           <% else (Notification.unread_count(current_user)) > 9  %>
            <%= link_to notifications_path, class: 'btn btn-dark' do%> 
                <i class="fas fa-envelope fa-2x"></i>
                <span class="badge rounded-pill badge-notification bg-danger">9+</span>
            <% end %>
            <% end %>
        <% end %>
      </div>
    </div>


<% if current_page?(posts_path)%>    
   <div class="container">
    <div class="navbar-nav ml-auto" id="navbarNav">
        <button class="btn btn-warning" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasBottom" aria-controls="offcanvasBottom">Users</button>

        <div class="offcanvas offcanvas-bottom" tabindex="-1" id="offcanvasBottom" aria-labelledby="offcanvasBottomLabel">
          <div class="offcanvas-header">
            <h5 class="fw-bold offcanvas-title text-center" id="offcanvasBottomLabel">Our Users</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body small">
              <div class="useless">
                <hr>
                  <% @user.each do |x|%>
                  <div class="d-flex text-muted mt-1">
                  <svg class="bd-placeholder-img flex-shrink-0 me-2 rounded" width="32" height="32" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: 32x32" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#007bff"></rect><text x="50%" y="50%" fill="#007bff" dy=".3em">32x32</text></svg>
                  <p class="pb-3 mb-0 small lh-sm border-bottom">
                      <strong class="d-block text-gray-dark"><%=link_to x.email,people_path(x.id)%> </strong>
                      Joined <%= time_ago_in_words(x.created_at) + ' ago'%>
                  </p>
                  </div>
              <% end %>
                  <small class="d-block text-center mt-1">
                  <%= link_to 'View All', peoples_path,class:'btn btn-outline-dark'%>
                  </small>
              </div>
          </div>
        </div>
      </div>
    </div>
   <% end %>
  </header>

  

